version: '3.3'

services:
    db:
        build: ./database
        container_name: data1
        environment:
            - MYSQL_DATABASE=${MYSQL_DATABASE}
            - MYSQL_USER=${MYSQL_USER}
            - MYSQL_PASSWORD=${MYSQL_PASSWORD}
            - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
        ports:
            - 3306:3306
        networks: 
            trusted:
                ipv4_address: 192.168.10.2

    web:
        build: ./web
        container_name: web1
        ports:
            - 80:80
        networks: 
            DMZ:
                ipv4_address: 192.168.30.3 

    
    dns:
        build: ./DNS
        container_name: dns
        ports:
            - '53:53/udp'
            - '53:53/tcp'
        networks: 
            DMZ:
                ipv4_address: 192.168.30.2

    directeur:
        build: ./employes/default
        container_name: directeur
        network:
            empreprise:
                ipv4_address: 192.168.0.2

    directeur:
        build: ./employes/default
        container_name: commerciaux1
        network:
            empreprise:
                ipv4_address: 192.168.0.34

    directeur:
        build: ./employes/default
        container_name: commerciaux2
        network:
            empreprise:
                ipv4_address: 192.168.0.35

    directeur:
        build: ./employes/default
        container_name: secr√©taire
        network:
            empreprise:
                ipv4_address: 192.168.0.66

    directeur:
        build: ./employes/default
        container_name: hangar
        network:
            empreprise:
                ipv4_address: 192.168.0.99

    directeur:
        build: ./employes/default
        container_name: atelier
        network:
            empreprise:
                ipv4_address: 192.168.0.98

    directeur:
        build: ./employes/default
        container_name: comptable1
        network:
            empreprise:
                ipv4_address: 192.168.0.130

    directeur:
        build: ./employes/default
        container_name: comptable1
        network:
            empreprise:
                ipv4_address: 192.168.0.131

    
networks:
    entreprise:
        ipam:
            driver: default
            config:
                - subnet: 192.168.0.0/24
    trusted:
        ipam:
            driver: default
            config:
                - subnet: 192.168.10.0/24
    DMZ:
        ipam:
            driver: default
            config:
                - subnet: 192.168.30.0/24

        
        
        
        

